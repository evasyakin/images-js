<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Images</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>

<div class="page">

    <header class="page-header row">
        <a class="to-home row" href=""><img class="logo" src="images/logo.png"><span>Images</span></a>
    </header>

    <main class="page-main">

        <div class="gallery-header row">
            <div id="add_image" class="popup">
                <form class="add_image-form row">
                    <p>New image</p>
                    <input type="text" name="title" placeholder="Title" maxlength="30" required>
                    <input type="text" name="url" placeholder="URL" maxlength="120" required>
                    <button class="close-add_image btn">Close</button>
                    <button class="btn-call_to_action" type="submit">Add</button>
                </form>
            </div>
            <a class="open-add_image btn-call_to_action" href="">New image</a>
        </div>

        <figcaption id="gallery" class="row">
            
            <!-- <figure class="image">
                <header class="image-header row">
                    <span class="image-title">Flower</span>
                    <a class="to-drop_image" href="">Delete</a>
                </header>
                <img class="image-content" src="images/sample1.jpg">
            </figure>

            <figure class="image">
                <header class="image-header row">
                    <span class="image-title">Flower</span>
                    <a class="to-drop_image" href="">Delete</a>
                </header>
                <img class="image-content" src="images/sample2.jpg">
            </figure> -->

        </figcaption>
    </main>

    <footer class="page-footer">
        <p class="copyright">&copy; <a href="https://vk.com/evasyakin" target="_blank">Egor Vasyakin</a> for <a href="http://sibext.com/" target="_blank">Sibext</a>, 2018</p>
    </footer>

</div>

<script type="text/javascript">
    
var addImagePopup = document.getElementById('add_image');
document.querySelector('.open-add_image').onclick = function () {
    addImagePopup.classList.add('opened');
    return false;
};
document.querySelector('.close-add_image').onclick = function () {
    addImagePopup.classList.remove('opened');
    return false;
};

addImagePopup.querySelector('.add_image-form').onsubmit = function () {
    addImage(this.title.value, this.url.value)
    return false;
};

var gallery = document.getElementById('gallery');

function addImage(title, url){
    let img = document.createElement('img');
    img.className = 'image-content';
    img.src = url;
    
    let span = document.createElement('span');
    span.className = 'image-title';
    span.innerText = title;
    
    let a = document.createElement('a');
    a.className = 'to-drop_image';
    a.innerText = 'Delete';
    a.href = '';
    a.onclick = function () {
        if (confirm('Вы точно хотите удалить изображение ' + title + ' ?')) {
            gallery.removeChild(figure);
        }
        return false;
    };
    
    let header = document.createElement('header');
    header.className = 'image-header row';
    
    let figure = document.createElement('figure');
    figure.className = 'image';

    header.appendChild(span);
    header.appendChild(a);
    figure.appendChild(header);
    figure.appendChild(img);

    gallery.insertBefore(figure, gallery.firstChild);
}


window.onload = function () {
    addImage('City', 'images/sample2.jpg');
    addImage('Mountain', 'images/sample1.jpg');
};



</script>

</body>
</html>